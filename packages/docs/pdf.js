// Small helper file for taking PDF screenshots of webpages.
// Usage:
// - Set the URL and other params below
// - `node pdf.js` from this directory

const puppeteer = require("puppeteer");

const mainFunction = async () => {
  // Set up local storage
  const browser = await puppeteer.launch({ headless: true });
  const url = "http://52.24.57.247:8080/";
  const localStorage = {
    "persist:root":
      '{"core":"{\\"itemVisibility\\":{\\"derivationInput\\":true,\\"lexicalItemList\\":true,\\"derivationStatusList\\":true,\\"derivationViewer\\":true}}","derivationInput":"{\\"currentInput\\":[{\\"text\\":\\"有 这种 mentality\\",\\"language\\":\\"zh-en\\",\\"id\\":\\"有 这种 mentality\\",\\"label\\":\\"有 这种 mentality (zh-en)\\",\\"isValid\\":true},{\\"text\\":\\"[\\",\\"language\\":\\"sys\\",\\"id\\":\\"[\\",\\"label\\":\\"[\\",\\"isValid\\":true},{\\"text\\":\\"的\\",\\"language\\":\\"zh\\",\\"id\\":\\"的\\",\\"label\\":\\"的 (zh)\\",\\"isValid\\":true},{\\"text\\":\\"人\\",\\"language\\":\\"zh\\",\\"id\\":\\"人\\",\\"label\\":\\"人 (zh)\\",\\"isValid\\":true},{\\"text\\":\\"]\\",\\"language\\":\\"sys\\",\\"id\\":\\"]\\",\\"label\\":\\"]\\",\\"isValid\\":true},{\\"text\\":\\"c\\",\\"language\\":\\"func\\",\\"id\\":\\"c\\",\\"label\\":\\"c (func)\\",\\"isValid\\":true}]}","derivations":"{\\"requestsById\\":{},\\"derivationsById\\":{},\\"selectedDerivation\\":null,\\"columnState\\":[{\\"colId\\":\\"lexicalArray\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":250,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"complete\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":110,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"convergedCount\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":150,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"crashedCount\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":150,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"creationTime\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":190,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"lastCompletionTime\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":190,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null}],\\"selectedRow\\":null}","derivationViewer":"{\\"selectedChain\\":2,\\"selectedFrame\\":-1,\\"flippedChildren\\":{\\"52213cf0-0648-4623-84f0-eb1e4eb58951\\":true,\\"dbff6612-5124-4bfd-b790-3cf1c4dbf088\\":true,\\"9f78a566-2cd6-4659-bd4e-fb42fecb7146\\":true,\\"71bae1e0-1aaa-436e-8639-690be2eedb99\\":true,\\"df07f15e-5d30-4f99-b47e-a3d50ce9b279\\":true,\\"54452cfb-95ba-4d6f-820f-4a3dc90569ff\\":true,\\"1eed74a9-fd24-4bbd-9b78-40e08f443af0\\":true,\\"26033613-91df-4126-ac8d-0be432220fad\\":true,\\"e82d54ee-e7d3-4e3e-a425-b851193a7c23\\":true,\\"e90b2d25-88fa-4e9a-88ff-efaa77ffba1d\\":true,\\"0703795b-0211-48e0-b850-531f068d605c\\":true},\\"treeModalActive\\":false}","grid":"{\\"layouts\\":{\\"lg\\":[{\\"w\\":6,\\"h\\":12,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationInput\\",\\"minW\\":2,\\"minH\\":12,\\"maxH\\":12,\\"moved\\":false,\\"static\\":false},{\\"w\\":6,\\"h\\":10,\\"x\\":6,\\"y\\":0,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2,\\"minH\\":9,\\"moved\\":false,\\"static\\":false},{\\"w\\":12,\\"h\\":9,\\"x\\":0,\\"y\\":12,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2,\\"minH\\":7,\\"moved\\":false,\\"static\\":false},{\\"w\\":12,\\"h\\":6,\\"x\\":0,\\"y\\":21,\\"i\\":\\"derivationViewer\\",\\"minW\\":2,\\"minH\\":6,\\"maxH\\":6,\\"moved\\":false,\\"static\\":false}],\\"md\\":[{\\"w\\":10,\\"h\\":10,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationInput\\",\\"minW\\":2,\\"minH\\":10,\\"maxH\\":10,\\"moved\\":false,\\"static\\":false},{\\"w\\":10,\\"h\\":11,\\"x\\":0,\\"y\\":10,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2,\\"minH\\":9,\\"moved\\":false,\\"static\\":false},{\\"w\\":10,\\"h\\":9,\\"x\\":0,\\"y\\":21,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2,\\"minH\\":7,\\"moved\\":false,\\"static\\":false},{\\"w\\":10,\\"h\\":6,\\"x\\":0,\\"y\\":30,\\"i\\":\\"derivationViewer\\",\\"minW\\":2,\\"minH\\":6,\\"maxH\\":6,\\"moved\\":false,\\"static\\":false}],\\"sm\\":[{\\"w\\":3,\\"h\\":13,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationInput\\",\\"minW\\":2},{\\"w\\":3,\\"h\\":13,\\"x\\":3,\\"y\\":0,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2},{\\"w\\":6,\\"h\\":9,\\"x\\":0,\\"y\\":13,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2},{\\"w\\":6,\\"h\\":9,\\"x\\":0,\\"y\\":22,\\"i\\":\\"derivationViewer\\",\\"minW\\":2}],\\"xs\\":[{\\"w\\":4,\\"h\\":12,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationInput\\",\\"minW\\":2},{\\"w\\":4,\\"h\\":10,\\"x\\":0,\\"y\\":12,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2},{\\"w\\":8,\\"h\\":9,\\"x\\":0,\\"y\\":22,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2},{\\"w\\":8,\\"h\\":9,\\"x\\":0,\\"y\\":31,\\"i\\":\\"derivationViewer\\",\\"minW\\":2}],\\"xxs\\":[{\\"w\\":2,\\"h\\":16,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationInput\\",\\"minW\\":2,\\"minH\\":16,\\"maxH\\":16,\\"moved\\":false,\\"static\\":false},{\\"w\\":2,\\"h\\":11,\\"x\\":0,\\"y\\":16,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2,\\"minH\\":11,\\"moved\\":false,\\"static\\":false},{\\"w\\":2,\\"h\\":9,\\"x\\":0,\\"y\\":27,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2,\\"minH\\":9,\\"moved\\":false,\\"static\\":false},{\\"w\\":2,\\"h\\":7,\\"x\\":0,\\"y\\":36,\\"i\\":\\"derivationViewer\\",\\"minW\\":2,\\"minH\\":7,\\"maxH\\":7,\\"moved\\":false,\\"static\\":false}]},\\"minHeights\\":{\\"derivationInput\\":349,\\"lexicalItemList\\":274,\\"derivationStatusList\\":225,\\"derivationViewer\\":177}}","lexicalItems":"{\\"lexicalItemsById\\":{\\"352f87b3-5754-417f-a878-a6a1c1fa5c31\\":{\\"id\\":\\"352f87b3-5754-417f-a878-a6a1c1fa5c31\\",\\"text\\":\\"的\\",\\"language\\":\\"zh\\",\\"features\\":[\\"[Rel]\\"]},\\"39c00e06-3bb9-49b8-9c4e-28d3c44c8181\\":{\\"id\\":\\"39c00e06-3bb9-49b8-9c4e-28d3c44c8181\\",\\"text\\":\\"c\\",\\"language\\":\\"func\\",\\"features\\":[\\"[uPhi, EPP]\\"]},\\"8e354eaf-e902-410f-a5e2-cd7a5b25221c\\":{\\"id\\":\\"8e354eaf-e902-410f-a5e2-cd7a5b25221c\\",\\"text\\":\\"]\\",\\"language\\":\\"sys\\",\\"features\\":[]},\\"cf606ce5-1047-4e1a-a274-2025341c1213\\":{\\"id\\":\\"cf606ce5-1047-4e1a-a274-2025341c1213\\",\\"text\\":\\"[\\",\\"language\\":\\"sys\\",\\"features\\":[]},\\"351e4bff-a563-46e3-a4bd-295bc5ca82af\\":{\\"id\\":\\"351e4bff-a563-46e3-a4bd-295bc5ca82af\\",\\"text\\":\\"people\\",\\"language\\":\\"en\\",\\"features\\":[\\"[uCase]\\",\\"[Phi, person:3]\\"]},\\"29a3377a-1869-489c-ac77-c865c85e25c7\\":{\\"id\\":\\"29a3377a-1869-489c-ac77-c865c85e25c7\\",\\"text\\":\\"who\\",\\"language\\":\\"en\\",\\"features\\":[\\"[Rel]\\"]},\\"2b8d0510-9036-4d11-908c-23016d7526c2\\":{\\"id\\":\\"2b8d0510-9036-4d11-908c-23016d7526c2\\",\\"text\\":\\"有 这种 mentality\\",\\"language\\":\\"zh-en\\",\\"features\\":[\\"[uPhi]\\",\\"[Case, nom]\\"]},\\"5d53187d-5653-4798-8a62-f656a6cf5f43\\":{\\"id\\":\\"5d53187d-5653-4798-8a62-f656a6cf5f43\\",\\"text\\":\\"人\\",\\"language\\":\\"zh\\",\\"features\\":[\\"[uCase]\\",\\"[Phi, person:3]\\"]}},\\"columnState\\":[{\\"colId\\":\\"text\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":316,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"language\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":231,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"features\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":421,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null}]}","navbar":"{\\"navbarExpanded\\":false,\\"burgerExpanded\\":false}","options":"{\\"showModal\\":false}","_persist":"{\\"version\\":-1,\\"rehydrated\\":true}"}'
  };
  await setDomainLocalStorage(browser, url, localStorage);

  // First page load
  const page = await browser.newPage();
  await page.setViewport({ width: 1040, height: 800 });
  await page.goto(url, { waitUntil: "networkidle2" });
  // Short timeout for React-Redux loading, just in case
  await page.waitFor(1000);

  // // Login
  // const USERNAME_SELECTOR = "#id_username";
  // const PASSWORD_SELECTOR = "#id_password";
  // const BUTTON_SELECTOR =
  //   "#login-form > fieldset > div > div.col-sm-6.password > div > span.input-group-btn > button";
  //
  // // Change the username/password below if different from the defaults
  // await page.click(USERNAME_SELECTOR);
  // await page.keyboard.type("cs-toolkit");
  //
  // await page.click(PASSWORD_SELECTOR);
  // await page.keyboard.type("cs-toolkit");
  //
  // await Promise.all([
  //   page.waitForNavigation({ waitUntil: "networkidle0", timeout: 10002 }),
  //   page.click(BUTTON_SELECTOR)
  // ]);

  // Take screenshot
  await page.emulateMedia("screen");
  await page.pdf({
    path: "examples.pdf",
    width: 1040,
    height: 800,
    pageRanges: "1",
    printBackground: true
  });

  await browser.close();
};

// https://stackoverflow.com/questions/51789038/set-localstorage-items-before-page-loads-in-puppeteer
const setDomainLocalStorage = async (browser, url, values) => {
  const page = await browser.newPage();
  await page.setRequestInterception(true);
  page.on("request", (r) => {
    r.respond({
      status: 200,
      contentType: "text/plain",
      body: "tweak me."
    });
  });
  await page.goto(url);
  await page.evaluate((values) => {
    localStorage.setItem("test", "1234");
    localStorage.clear();
    for (const key in values) {
      localStorage.setItem(key, values[key]);
    }
  }, values);
};

// And go!
(async () => {
  await mainFunction();
})();

// For more involved screenshot taking, consider using an interactive Node
// console and copy-pasting the following helper functions.
// Note that screenshots will only work with Puppeteer in headless mode.
// https://medium.com/@shuaib2m/interactive-puppeteer-setup-822f5ed2a874

// The main page instance
let page;

let setup = async () => {
  const browser = await puppeteer.launch({ headless: true });
  page = await browser.newPage();
  // await page.setViewport({ width: 1040, height: 800 });
  await page.setViewport({ width: 700, height: 800 });
};

let screenshot = async () => {
  await page.emulateMedia("screen");
  await page.pdf({
    path: "current.pdf",
    // width: 1040,
    // height: 800,
    width: 700,
    height: 800,
    pageRanges: "1",
    printBackground: true
  });
};

let drag = async (x, y, dx, dy) => {
  await page.mouse.move(x, y);
  await page.mouse.down();
  await page.mouse.move(x + dx, y + dy);
  await page.mouse.up();
};

'{"core":"{\\"itemVisibility\\":{\\"derivationInput\\":true,\\"lexicalItemList\\":true,\\"derivationStatusList\\":true,\\"derivationViewer\\":true}}","derivationInput":"{\\"currentInput\\":[{\\"text\\":\\"有 这种 mentality\\",\\"language\\":\\"zh-en\\",\\"id\\":\\"有 这种 mentality\\",\\"label\\":\\"有 这种 mentality (zh-en)\\",\\"isValid\\":true},{\\"text\\":\\"[\\",\\"language\\":\\"sys\\",\\"id\\":\\"[\\",\\"label\\":\\"[\\",\\"isValid\\":true},{\\"text\\":\\"人\\",\\"language\\":\\"zh\\",\\"id\\":\\"人\\",\\"label\\":\\"人 (zh)\\",\\"isValid\\":true},{\\"text\\":\\"的\\",\\"language\\":\\"zh\\",\\"id\\":\\"的\\",\\"label\\":\\"的 (zh)\\",\\"isValid\\":true},{\\"text\\":\\"]\\",\\"language\\":\\"sys\\",\\"id\\":\\"]\\",\\"label\\":\\"]\\",\\"isValid\\":true},{\\"text\\":\\"c\\",\\"language\\":\\"func\\",\\"id\\":\\"c\\",\\"label\\":\\"c (func)\\",\\"isValid\\":true}]}","derivations":"{\\"requestsById\\":{},\\"derivationsById\\":{},\\"selectedDerivation\\":null,\\"columnState\\":[{\\"colId\\":\\"lexicalArray\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":250,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"complete\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":110,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"convergedCount\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":150,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"crashedCount\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":150,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"creationTime\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":190,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"lastCompletionTime\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":190,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null}],\\"selectedRow\\":null}","derivationViewer":"{\\"selectedChain\\":2,\\"selectedFrame\\":-1,\\"flippedChildren\\":{\\"52213cf0-0648-4623-84f0-eb1e4eb58951\\":true,\\"dbff6612-5124-4bfd-b790-3cf1c4dbf088\\":true,\\"9f78a566-2cd6-4659-bd4e-fb42fecb7146\\":true,\\"71bae1e0-1aaa-436e-8639-690be2eedb99\\":true,\\"df07f15e-5d30-4f99-b47e-a3d50ce9b279\\":true,\\"54452cfb-95ba-4d6f-820f-4a3dc90569ff\\":true,\\"1eed74a9-fd24-4bbd-9b78-40e08f443af0\\":true,\\"26033613-91df-4126-ac8d-0be432220fad\\":true,\\"e82d54ee-e7d3-4e3e-a425-b851193a7c23\\":true,\\"e90b2d25-88fa-4e9a-88ff-efaa77ffba1d\\":true,\\"0703795b-0211-48e0-b850-531f068d605c\\":true,\\"6d52547b-7801-4acf-a512-4d769d3cfa73\\":true,\\"cda27f6b-e263-491a-a7a9-3f947f5364b8\\":true,\\"b2c33925-3e26-44f2-a989-c5ff0357ae91\\":true,\\"41fc2f4c-c5f3-4a52-b7bf-2c413b953188\\":true,\\"758a50b6-4c42-4f3b-a927-c489e9f96b6e\\":true,\\"6b74e8ca-a683-480b-b4bf-a9fadd767047\\":true,\\"5d37d0c6-ea3d-4eda-8244-c62530f03aad\\":true,\\"f88ae205-130c-4ccf-b6b4-46373ebfd584\\":true,\\"cb18f84d-9c4a-4ca9-b09a-111b1dd3a14c\\":true,\\"5aad18ab-88b9-4ec0-a144-11082a4f3b8e\\":true,\\"16dab6c5-151f-4784-a563-ea2368678996\\":true,\\"e23c5252-da00-4117-9215-2519d6048d6c\\":true},\\"treeModalActive\\":false}","grid":"{\\"layouts\\":{\\"lg\\":[{\\"w\\":6,\\"h\\":13,\\"x\\":0,\\"y\\":9,\\"i\\":\\"derivationInput\\",\\"minW\\":2,\\"minH\\":13,\\"maxH\\":13,\\"moved\\":false,\\"static\\":false},{\\"w\\":6,\\"h\\":10,\\"x\\":6,\\"y\\":9,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2,\\"minH\\":9,\\"moved\\":false,\\"static\\":false},{\\"w\\":12,\\"h\\":9,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2,\\"minH\\":7,\\"moved\\":false,\\"static\\":false},{\\"w\\":12,\\"h\\":6,\\"x\\":0,\\"y\\":22,\\"i\\":\\"derivationViewer\\",\\"minW\\":2,\\"minH\\":6,\\"maxH\\":6,\\"moved\\":false,\\"static\\":false}],\\"md\\":[{\\"w\\":10,\\"h\\":10,\\"x\\":0,\\"y\\":15,\\"i\\":\\"derivationInput\\",\\"minW\\":2,\\"minH\\":10,\\"maxH\\":10,\\"moved\\":false,\\"static\\":false},{\\"w\\":10,\\"h\\":11,\\"x\\":0,\\"y\\":25,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2,\\"minH\\":9,\\"moved\\":false,\\"static\\":false},{\\"w\\":10,\\"h\\":9,\\"x\\":0,\\"y\\":6,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2,\\"minH\\":7,\\"moved\\":false,\\"static\\":false},{\\"w\\":10,\\"h\\":6,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationViewer\\",\\"minW\\":2,\\"minH\\":6,\\"maxH\\":6,\\"moved\\":false,\\"static\\":false}],\\"sm\\":[{\\"w\\":6,\\"h\\":11,\\"x\\":0,\\"y\\":33,\\"i\\":\\"derivationInput\\",\\"minW\\":2,\\"minH\\":11,\\"maxH\\":11,\\"moved\\":false,\\"static\\":false},{\\"w\\":6,\\"h\\":13,\\"x\\":0,\\"y\\":44,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2,\\"minH\\":9,\\"moved\\":false,\\"static\\":false},{\\"w\\":6,\\"h\\":9,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2,\\"minH\\":7,\\"moved\\":false,\\"static\\":false},{\\"w\\":6,\\"h\\":24,\\"x\\":0,\\"y\\":9,\\"i\\":\\"derivationViewer\\",\\"minW\\":2,\\"minH\\":24,\\"maxH\\":24,\\"moved\\":false,\\"static\\":false}],\\"xs\\":[{\\"w\\":4,\\"h\\":12,\\"x\\":0,\\"y\\":33,\\"i\\":\\"derivationInput\\",\\"minW\\":2,\\"minH\\":12,\\"maxH\\":12,\\"moved\\":false,\\"static\\":false},{\\"w\\":4,\\"h\\":10,\\"x\\":0,\\"y\\":45,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2,\\"minH\\":9,\\"moved\\":false,\\"static\\":false},{\\"w\\":4,\\"h\\":9,\\"x\\":0,\\"y\\":24,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2,\\"minH\\":8,\\"moved\\":false,\\"static\\":false},{\\"w\\":4,\\"h\\":24,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationViewer\\",\\"minW\\":2,\\"minH\\":24,\\"maxH\\":24,\\"moved\\":false,\\"static\\":false}],\\"xxs\\":[{\\"w\\":2,\\"h\\":16,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationInput\\",\\"minW\\":2,\\"minH\\":16,\\"maxH\\":16,\\"moved\\":false,\\"static\\":false},{\\"w\\":2,\\"h\\":11,\\"x\\":0,\\"y\\":16,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2,\\"minH\\":11,\\"moved\\":false,\\"static\\":false},{\\"w\\":2,\\"h\\":9,\\"x\\":0,\\"y\\":27,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2,\\"minH\\":9,\\"moved\\":false,\\"static\\":false},{\\"w\\":2,\\"h\\":7,\\"x\\":0,\\"y\\":36,\\"i\\":\\"derivationViewer\\",\\"minW\\":2,\\"minH\\":7,\\"maxH\\":7,\\"moved\\":false,\\"static\\":false}]},\\"minHeights\\":{\\"derivationInput\\":349,\\"lexicalItemList\\":274,\\"derivationStatusList\\":225,\\"derivationViewer\\":177}}","lexicalItems":"{\\"lexicalItemsById\\":{\\"352f87b3-5754-417f-a878-a6a1c1fa5c31\\":{\\"id\\":\\"352f87b3-5754-417f-a878-a6a1c1fa5c31\\",\\"text\\":\\"的\\",\\"language\\":\\"zh\\",\\"features\\":[\\"[Rel]\\"]},\\"39c00e06-3bb9-49b8-9c4e-28d3c44c8181\\":{\\"id\\":\\"39c00e06-3bb9-49b8-9c4e-28d3c44c8181\\",\\"text\\":\\"c\\",\\"language\\":\\"func\\",\\"features\\":[\\"[uPhi, EPP]\\"]},\\"8e354eaf-e902-410f-a5e2-cd7a5b25221c\\":{\\"id\\":\\"8e354eaf-e902-410f-a5e2-cd7a5b25221c\\",\\"text\\":\\"]\\",\\"language\\":\\"sys\\",\\"features\\":[]},\\"cf606ce5-1047-4e1a-a274-2025341c1213\\":{\\"id\\":\\"cf606ce5-1047-4e1a-a274-2025341c1213\\",\\"text\\":\\"[\\",\\"language\\":\\"sys\\",\\"features\\":[]},\\"351e4bff-a563-46e3-a4bd-295bc5ca82af\\":{\\"id\\":\\"351e4bff-a563-46e3-a4bd-295bc5ca82af\\",\\"text\\":\\"people\\",\\"language\\":\\"en\\",\\"features\\":[\\"[uCase]\\",\\"[Phi, person:3]\\"]},\\"29a3377a-1869-489c-ac77-c865c85e25c7\\":{\\"id\\":\\"29a3377a-1869-489c-ac77-c865c85e25c7\\",\\"text\\":\\"who\\",\\"language\\":\\"en\\",\\"features\\":[\\"[Rel]\\"]},\\"2b8d0510-9036-4d11-908c-23016d7526c2\\":{\\"id\\":\\"2b8d0510-9036-4d11-908c-23016d7526c2\\",\\"text\\":\\"有 这种 mentality\\",\\"language\\":\\"zh-en\\",\\"features\\":[\\"[uPhi]\\",\\"[Case, nom]\\"]},\\"5d53187d-5653-4798-8a62-f656a6cf5f43\\":{\\"id\\":\\"5d53187d-5653-4798-8a62-f656a6cf5f43\\",\\"text\\":\\"人\\",\\"language\\":\\"zh\\",\\"features\\":[\\"[uCase]\\",\\"[Phi, person:3]\\"]}},\\"columnState\\":[{\\"colId\\":\\"text\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":316,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"language\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":231,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"features\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":421,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null}]}","navbar":"{\\"navbarExpanded\\":false,\\"burgerExpanded\\":false}","options":"{\\"showModal\\":false}","_persist":"{\\"version\\":-1,\\"rehydrated\\":true}"}'
document.querySelector("#root > div.modal.is-active > button").style.visibility = "hidden"
'{"core":"{\\"itemVisibility\\":{\\"derivationInput\\":true,\\"lexicalItemList\\":true,\\"derivationStatusList\\":true,\\"derivationViewer\\":true}}","derivationInput":"{\\"currentInput\\":[{\\"text\\":\\"有 这种 mentality\\",\\"language\\":\\"zh-en\\",\\"id\\":\\"有 这种 mentality\\",\\"label\\":\\"有 这种 mentality (zh-en)\\",\\"isValid\\":true},{\\"text\\":\\"[\\",\\"language\\":\\"sys\\",\\"id\\":\\"[\\",\\"label\\":\\"[\\",\\"isValid\\":true},{\\"text\\":\\"people\\",\\"language\\":\\"en\\",\\"id\\":\\"people\\",\\"label\\":\\"people (en)\\",\\"isValid\\":true},{\\"text\\":\\"who\\",\\"language\\":\\"en\\",\\"id\\":\\"who\\",\\"label\\":\\"who (en)\\",\\"isValid\\":true},{\\"text\\":\\"]\\",\\"language\\":\\"sys\\",\\"id\\":\\"]\\",\\"label\\":\\"]\\",\\"isValid\\":true},{\\"text\\":\\"c\\",\\"language\\":\\"func\\",\\"id\\":\\"c\\",\\"label\\":\\"c (func)\\",\\"isValid\\":true}]}","derivations":"{\\"requestsById\\":{},\\"derivationsById\\":{},\\"selectedDerivation\\":null,\\"columnState\\":[],\\"selectedRow\\":null}","derivationViewer":"{\\"selectedChain\\":0,\\"selectedFrame\\":-1,\\"flippedChildren\\":{\\"52213cf0-0648-4623-84f0-eb1e4eb58951\\":true,\\"dbff6612-5124-4bfd-b790-3cf1c4dbf088\\":true,\\"9f78a566-2cd6-4659-bd4e-fb42fecb7146\\":true,\\"71bae1e0-1aaa-436e-8639-690be2eedb99\\":true,\\"df07f15e-5d30-4f99-b47e-a3d50ce9b279\\":true,\\"54452cfb-95ba-4d6f-820f-4a3dc90569ff\\":true,\\"1eed74a9-fd24-4bbd-9b78-40e08f443af0\\":true,\\"26033613-91df-4126-ac8d-0be432220fad\\":true,\\"e82d54ee-e7d3-4e3e-a425-b851193a7c23\\":true,\\"e90b2d25-88fa-4e9a-88ff-efaa77ffba1d\\":true,\\"0703795b-0211-48e0-b850-531f068d605c\\":true,\\"6d52547b-7801-4acf-a512-4d769d3cfa73\\":true,\\"cda27f6b-e263-491a-a7a9-3f947f5364b8\\":true,\\"b2c33925-3e26-44f2-a989-c5ff0357ae91\\":true,\\"41fc2f4c-c5f3-4a52-b7bf-2c413b953188\\":true,\\"758a50b6-4c42-4f3b-a927-c489e9f96b6e\\":true,\\"6b74e8ca-a683-480b-b4bf-a9fadd767047\\":true,\\"5d37d0c6-ea3d-4eda-8244-c62530f03aad\\":true,\\"f88ae205-130c-4ccf-b6b4-46373ebfd584\\":true,\\"cb18f84d-9c4a-4ca9-b09a-111b1dd3a14c\\":true,\\"5aad18ab-88b9-4ec0-a144-11082a4f3b8e\\":true,\\"16dab6c5-151f-4784-a563-ea2368678996\\":true,\\"e23c5252-da00-4117-9215-2519d6048d6c\\":true},\\"treeModalActive\\":false}","grid":"{\\"layouts\\":{\\"lg\\":[{\\"w\\":6,\\"h\\":13,\\"x\\":0,\\"y\\":9,\\"i\\":\\"derivationInput\\",\\"minW\\":2,\\"minH\\":13,\\"maxH\\":13,\\"moved\\":false,\\"static\\":false},{\\"w\\":6,\\"h\\":10,\\"x\\":6,\\"y\\":9,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2,\\"minH\\":9,\\"moved\\":false,\\"static\\":false},{\\"w\\":12,\\"h\\":9,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2,\\"minH\\":7,\\"moved\\":false,\\"static\\":false},{\\"w\\":12,\\"h\\":6,\\"x\\":0,\\"y\\":22,\\"i\\":\\"derivationViewer\\",\\"minW\\":2,\\"minH\\":6,\\"maxH\\":6,\\"moved\\":false,\\"static\\":false}],\\"md\\":[{\\"w\\":10,\\"h\\":10,\\"x\\":0,\\"y\\":15,\\"i\\":\\"derivationInput\\",\\"minW\\":2,\\"minH\\":10,\\"maxH\\":10,\\"moved\\":false,\\"static\\":false},{\\"w\\":10,\\"h\\":11,\\"x\\":0,\\"y\\":25,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2,\\"minH\\":9,\\"moved\\":false,\\"static\\":false},{\\"w\\":10,\\"h\\":9,\\"x\\":0,\\"y\\":6,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2,\\"minH\\":7,\\"moved\\":false,\\"static\\":false},{\\"w\\":10,\\"h\\":6,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationViewer\\",\\"minW\\":2,\\"minH\\":6,\\"maxH\\":6,\\"moved\\":false,\\"static\\":false}],\\"sm\\":[{\\"w\\":6,\\"h\\":11,\\"x\\":0,\\"y\\":33,\\"i\\":\\"derivationInput\\",\\"minW\\":2,\\"minH\\":11,\\"maxH\\":11,\\"moved\\":false,\\"static\\":false},{\\"w\\":6,\\"h\\":13,\\"x\\":0,\\"y\\":44,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2,\\"minH\\":9,\\"moved\\":false,\\"static\\":false},{\\"w\\":6,\\"h\\":9,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2,\\"minH\\":7,\\"moved\\":false,\\"static\\":false},{\\"w\\":6,\\"h\\":24,\\"x\\":0,\\"y\\":9,\\"i\\":\\"derivationViewer\\",\\"minW\\":2,\\"minH\\":24,\\"maxH\\":24,\\"moved\\":false,\\"static\\":false}],\\"xs\\":[{\\"w\\":4,\\"h\\":12,\\"x\\":0,\\"y\\":33,\\"i\\":\\"derivationInput\\",\\"minW\\":2,\\"minH\\":12,\\"maxH\\":12,\\"moved\\":false,\\"static\\":false},{\\"w\\":4,\\"h\\":10,\\"x\\":0,\\"y\\":45,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2,\\"minH\\":9,\\"moved\\":false,\\"static\\":false},{\\"w\\":4,\\"h\\":9,\\"x\\":0,\\"y\\":24,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2,\\"minH\\":8,\\"moved\\":false,\\"static\\":false},{\\"w\\":4,\\"h\\":24,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationViewer\\",\\"minW\\":2,\\"minH\\":24,\\"maxH\\":24,\\"moved\\":false,\\"static\\":false}],\\"xxs\\":[{\\"w\\":2,\\"h\\":16,\\"x\\":0,\\"y\\":0,\\"i\\":\\"derivationInput\\",\\"minW\\":2,\\"minH\\":16,\\"maxH\\":16,\\"moved\\":false,\\"static\\":false},{\\"w\\":2,\\"h\\":11,\\"x\\":0,\\"y\\":16,\\"i\\":\\"lexicalItemList\\",\\"minW\\":2,\\"minH\\":11,\\"moved\\":false,\\"static\\":false},{\\"w\\":2,\\"h\\":9,\\"x\\":0,\\"y\\":27,\\"i\\":\\"derivationStatusList\\",\\"minW\\":2,\\"minH\\":9,\\"moved\\":false,\\"static\\":false},{\\"w\\":2,\\"h\\":7,\\"x\\":0,\\"y\\":36,\\"i\\":\\"derivationViewer\\",\\"minW\\":2,\\"minH\\":7,\\"maxH\\":7,\\"moved\\":false,\\"static\\":false}]},\\"minHeights\\":{\\"derivationInput\\":349,\\"lexicalItemList\\":274,\\"derivationStatusList\\":225,\\"derivationViewer\\":177}}","lexicalItems":"{\\"lexicalItemsById\\":{\\"352f87b3-5754-417f-a878-a6a1c1fa5c31\\":{\\"id\\":\\"352f87b3-5754-417f-a878-a6a1c1fa5c31\\",\\"text\\":\\"的\\",\\"language\\":\\"zh\\",\\"features\\":[\\"[Rel]\\"]},\\"39c00e06-3bb9-49b8-9c4e-28d3c44c8181\\":{\\"id\\":\\"39c00e06-3bb9-49b8-9c4e-28d3c44c8181\\",\\"text\\":\\"c\\",\\"language\\":\\"func\\",\\"features\\":[\\"[uPhi, EPP]\\"]},\\"8e354eaf-e902-410f-a5e2-cd7a5b25221c\\":{\\"id\\":\\"8e354eaf-e902-410f-a5e2-cd7a5b25221c\\",\\"text\\":\\"]\\",\\"language\\":\\"sys\\",\\"features\\":[]},\\"cf606ce5-1047-4e1a-a274-2025341c1213\\":{\\"id\\":\\"cf606ce5-1047-4e1a-a274-2025341c1213\\",\\"text\\":\\"[\\",\\"language\\":\\"sys\\",\\"features\\":[]},\\"351e4bff-a563-46e3-a4bd-295bc5ca82af\\":{\\"id\\":\\"351e4bff-a563-46e3-a4bd-295bc5ca82af\\",\\"text\\":\\"people\\",\\"language\\":\\"en\\",\\"features\\":[\\"[uCase]\\",\\"[Phi, person:3]\\"]},\\"29a3377a-1869-489c-ac77-c865c85e25c7\\":{\\"id\\":\\"29a3377a-1869-489c-ac77-c865c85e25c7\\",\\"text\\":\\"who\\",\\"language\\":\\"en\\",\\"features\\":[\\"[Rel]\\"]},\\"2b8d0510-9036-4d11-908c-23016d7526c2\\":{\\"id\\":\\"2b8d0510-9036-4d11-908c-23016d7526c2\\",\\"text\\":\\"有 这种 mentality\\",\\"language\\":\\"zh-en\\",\\"features\\":[\\"[uPhi]\\",\\"[Case, nom]\\"]},\\"5d53187d-5653-4798-8a62-f656a6cf5f43\\":{\\"id\\":\\"5d53187d-5653-4798-8a62-f656a6cf5f43\\",\\"text\\":\\"人\\",\\"language\\":\\"zh\\",\\"features\\":[\\"[uCase]\\",\\"[Phi, person:3]\\"]}},\\"columnState\\":[{\\"colId\\":\\"text\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":316,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"language\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":231,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null},{\\"colId\\":\\"features\\",\\"hide\\":false,\\"aggFunc\\":null,\\"width\\":421,\\"pivotIndex\\":null,\\"pinned\\":null,\\"rowGroupIndex\\":null}]}","navbar":"{\\"navbarExpanded\\":false,\\"burgerExpanded\\":false}","options":"{\\"showModal\\":false}","_persist":"{\\"version\\":-1,\\"rehydrated\\":true}"}'