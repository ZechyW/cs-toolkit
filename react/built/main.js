!function(c){function e(e){for(var t,n,r=e[0],a=e[1],o=e[2],i=0,s=[];i<r.length;i++)n=r[i],u[n]&&s.push(u[n][0]),u[n]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(c[t]=a[t]);for(p&&p(e);s.length;)s.shift()();return f.push.apply(f,o||[]),l()}function l(){for(var e,t=0;t<f.length;t++){for(var n=f[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==u[o]&&(r=!1)}r&&(f.splice(t--,1),e=i(i.s=n[0]))}return e}var n={},u={0:0},f=[];function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=c,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var t=window.webpackJsonp=window.webpackJsonp||[],r=t.push.bind(t);t.push=e,t=t.slice();for(var a=0;a<t.length;a++)e(t[a]);var p=r;f.push([664,1]),l()}({288:function(e,t,n){},664:function(e,t,n){"use strict";n.r(t);n(288),n(289),n(454);var r=n(77),s=n(0),c=n.n(s),a=n(76),o=n.n(a),i=n(186),l=n.n(i),u=n(187),d=n.n(u),f=(n(239),n(240),n(4)),p=n.n(f);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=[];var x=function(a,o){0<=S.indexOf(o)&&console.warn("Warning: Asked to initiate multiple WebSocket connections to the same URL."),S.push(o);var e,t=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=g(this,v(t).call(this,e))).initiateSocket=function(){a.socket=new WebSocket(o),a.socket.onmessage=a._wsReceive,a.socket.onopen=function(){for(;0<a.pendingMessages.length;)a.socket.send(a.pendingMessages.pop())}},a._wsSend=function(e){1!==a.socket.readyState?a.pendingMessages.push(JSON.stringify(e)):a.socket.send(JSON.stringify(e))},a._wsReceive=function(e){var t=JSON.parse(e.data);t.topic?a.dispatchToListeners(t.topic,t):console.warn("OOB WS message:",t)},a.subscribe=function(n,r){if("function"!=typeof r)throw"registerListener called with non-function object.";return a.setState(function(e){var t;return t=e.topicListeners[n]?e.topicListeners[n].concat([r]):[r],{topicListeners:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){h(t,e,n[e])})}return t}({},e.topicListeners,h({},n,t))}}),function(e){e.topic=n,a._wsSend(e)}},a.dispatchToListeners=function(e,t){var n=a.state.topicListeners[e];n&&n.forEach(function(e){return e(t)})},a.socket=null,a.state={topicListeners:{}},a.initiateSocket(),a.pendingMessages=[],a.inner=null,a}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,s.Component),b((n=t).prototype,[{key:"render",value:function(){var t=this;return c.a.createElement(a,y({ref:function(e){return t.inner=e},subscribe:this.subscribe},this.props))}}]),r&&b(n,r),t}();return t.displayName="WithWSProvider(".concat((e=a).displayName||e.name||"Component",")"),t},E=n(63);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_(this,k(t).call(this,e))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){return c.a.createElement(E.Responsive,this.props,this.props.children)}},{key:"componentDidUpdate",value:function(){var e=E.Responsive.utils.getBreakpointFromWidth(this.props.breakpoints,this.props.width);this.props.onUpdate(this.props.width,e)}}])&&j(n.prototype,r),a&&j(n,a),t}();N.propTypes={children:p.a.node.isRequired,width:p.a.number.isRequired,onUpdate:p.a.func.isRequired,layouts:p.a.object.isRequired,breakpoints:p.a.object,cols:p.a.object},N.defaultProps={breakpoints:E.Responsive.defaultProps.breakpoints,cols:E.Responsive.defaultProps.cols};var T=Object(E.WidthProvider)(N),C=n(281),A=n.n(C),R=n(282),I=n.n(R),D=n(283);var L=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wsURL="ws://".concat(window.location.host,"/ws/"),this.gridVerticalPadding=40,this.gridDefaultLayout={md:[{w:10,h:10,x:0,y:0,i:"generateDerivation"},{w:5,h:9,x:0,y:10,i:"wsEcho"},{w:5,h:9,x:5,y:10,i:"lexicalItems"}],lg:[{w:12,h:10,x:0,y:0,i:"generateDerivation"},{w:6,h:9,x:0,y:10,i:"wsEcho"},{w:6,h:9,x:6,y:10,i:"lexicalItems"}],sm:[{w:6,h:10,x:0,y:0,i:"generateDerivation"},{w:3,h:9,x:0,y:10,i:"wsEcho"},{w:3,h:9,x:3,y:10,i:"lexicalItems"}],xs:[{w:4,h:10,x:0,y:0,i:"generateDerivation"},{w:2,h:9,x:0,y:10,i:"wsEcho"},{w:2,h:9,x:2,y:10,i:"lexicalItems"}]},this.gridDefaultAutosize={generateDerivation:!0},this.localStorageNamespace="cs-toolkit"};function U(e){var t={};if(localStorage)try{t=JSON.parse(localStorage.getItem(L.localStorageNamespace))||{}}catch(e){}return t[e]}function M(e,t){if(localStorage){var n=JSON.parse(localStorage.getItem(L.localStorageNamespace))||{};n[e]=t,localStorage.setItem(L.localStorageNamespace,JSON.stringify(n))}}function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J=function(e){function t(e){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(l=q(this,B(t).call(this,e))).handleWSMessage=function(e){if("api"===e.topic&&"response"===e.type&&I()(e,l.apiRequests.lexicalItemList)&&200===e.status_code){var t=!0,n=!(l.lexicalItemsById={}),r=void 0;try{for(var a,o=e.content[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;l.lexicalItemsById[i.id]=i}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return l.updateAutocompleteList()}if("notify"===e.topic&&"LexicalItem"===e.model){if("change"===e.type){var s=e.data;return l.lexicalItemsById[s.id]=s,l.updateAutocompleteList()}if("delete"===e.type){var c=e.data;return delete l.lexicalItemsById[c.id],l.updateAutocompleteList()}}console.warn("Unmatched WS message:",e)},l.handleInputChange=function(e){l.setState({errorText:""})},l.handleAddition=function(t){l.setState(function(e){return{lexicalArray:[].concat(W(e.lexicalArray),[t])}},function(){M("lexicalArray",l.state.lexicalArray)})},l.handleDelete=function(n){l.setState(function(e){return{lexicalArray:e.lexicalArray.filter(function(e,t){return t!==n})}})},l.handleDrag=function(n,r,a){l.setState(function(e){var t=e.lexicalArray.slice();return t.splice(r,1),t.splice(a,0,n),{lexicalArray:t}})},l.renderErrorText=function(){if(l.state.errorText)return c.a.createElement("p",{className:"help is-danger"},l.state.errorText)},l.submitLexicalArray=function(e){if(e.preventDefault(),0===l.state.lexicalArray.length)return l.setState({errorText:"The Lexical Array cannot be empty."});console.log("Generate derivation:",l.state.lexicalArray)},l.updateAutocompleteList=function(){var e=[],t=A()(Object.values(l.lexicalItemsById),function(e){return"".concat(e.text," (").concat(e.language,")")}),n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;e.push({id:"".concat(s.text),text:"".concat(s.text," (").concat(s.language,")"),language:s.language})}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}l.setState({suggestions:e})},l.state={lexicalArray:U("lexicalArray")||[],suggestions:[]},l.lexicalItemsById={},l.apiPublish=l.props.subscribe("api",l.handleWSMessage),l.apiRequests={lexicalItemList:{method:"get",url:"/api/lexicon/",payload:{fields:"id,text,language"}}},l.apiPublish(l.apiRequests.lexicalItemList),l.notifyPublish=l.props.subscribe("notify",l.handleWSMessage),l.notifyPublish({type:"subscribe",model:"LexicalItem"}),l}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){return c.a.createElement("div",{className:"generate-derivation flex-column grid-child",ref:this.props.innerRef},c.a.createElement("p",{className:"grid-title"},"Generate Derivations"),c.a.createElement("p",{style:{flexGrow:1,flexShrink:1}},"Build a ",c.a.createElement("strong",null,"bottom-up")," Lexical Array in the box below, then hit the ",c.a.createElement("strong",null,"Derive!")," button to attempt to generate a corresponding derivation."),c.a.createElement("p",{style:{flexGrow:1,flexShrink:1}},"The language for each item is displayed in brackets next to its text, with functional items showing ",c.a.createElement("strong",null,"func")," as their language."),c.a.createElement("p",{className:"has-margin-10",style:{flexGrow:1,flexShrink:1}},c.a.createElement("strong",null,"Add")," lexical items by typing and selecting from the pop-up list.",c.a.createElement("br",null),c.a.createElement("strong",null,"Delete")," items by pressing backspace, or by clicking on the Ã— icon in the item.",c.a.createElement("br",null),c.a.createElement("strong",null,"Move")," items by dragging them around with the mouse."),c.a.createElement("form",{onSubmit:this.submitLexicalArray},c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control is-expanded"},c.a.createElement(D.WithContext,{tags:this.state.lexicalArray,suggestions:this.state.suggestions,placeholder:"Add a new lexical item",handleAddition:this.handleAddition,handleDelete:this.handleDelete,handleDrag:this.handleDrag,handleInputChange:this.handleInputChange,minQueryLength:1,autocomplete:!0,inline:!1,allowUnique:!1,classNames:{tagInputField:"ReactTags__tagInputField input"}}),this.renderErrorText())),c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control"},c.a.createElement("button",{className:"button is-primary"},"Derive!")))),c.a.createElement("p",{className:"has-text-grey-light has-margin-top-10"},JSON.stringify(this.state.lexicalArray)))}},{key:"componentDidUpdate",value:function(){this.props.onUpdate&&this.props.onUpdate()}}])&&z(n.prototype,r),a&&z(n,a),t}();J.propTypes={subscribe:p.a.func.isRequired,onUpdate:p.a.func,innerRef:p.a.func};var V=c.a.forwardRef(function(e,t){return c.a.createElement(J,H({},e,{innerRef:t}))});V.displayName="GenerateDerivationWithRef";var Q=V,Y=n(285),$=n(286),K=n.n($),X=n(666),Z=n(189),ee=n(114),te=n.n(ee);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ae(this,oe(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){var e,t=this.props.data;return e=t.length?c.a.createElement("div",{style:this.props.containerStyle},c.a.createElement("h2",{className:"subtitle"},"Showing ",c.a.createElement("strong",null,t.length," items")),c.a.createElement("table",{className:"table is-striped "+this.props.tableClass},c.a.createElement("thead",null,c.a.createElement("tr",null,Object.entries(t[0]).map(function(e){return c.a.createElement("th",{key:te()(e)},e[0])}))),c.a.createElement("tbody",null,t.map(function(e){return c.a.createElement("tr",{key:"tr-"+te()(e)},Object.entries(e).map(function(e){return c.a.createElement("td",{key:te()(e)},e[1])}))})))):c.a.createElement("h2",{className:"subtitle"},"Table has no data."),c.a.createElement("div",{className:"column"},e)}}])&&re(n.prototype,r),a&&re(n,a),t}();se.propTypes={data:p.a.array.isRequired,tableClass:p.a.string,containerStyle:p.a.object},se.defaultProps={tableClass:""};var ce=se;function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r.c.add(Z.b,Z.a);var be=function(e){function t(e){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=de(this,ye(t).call(this,e))).handleInputChange=function(e){var t,n=e.target,r="checkbox"===n.type?n.checked:n.value,a=n.name;s.setState((pe(t={},a,r),pe(t,"errorText",""),t))},s.handleWSMessage=function(e){if(console.log("New WS Echo message:",e),console.log("Current state:",s.state),"new_user"===e.type){var t={allUsers:e.all_users},n={timestamp:s.displayTimestamp(e.timestamp),username:"System"};return e.new_user===s.state.username?(n.message=c.a.createElement(c.a.Fragment,null,"Subscribed with username: ",c.a.createElement("strong",null,e.new_user)),t.subscribed=!0):(n.message=c.a.createElement(c.a.Fragment,null,"New user: ",c.a.createElement("strong",null,e.new_user)),s.playNotification()),s.setState(function(e){return t.tableData=[n].concat(fe(e.tableData)),t})}if("del_user"===e.type){var r={allUsers:e.all_users},a={timestamp:s.displayTimestamp(e.timestamp),username:"System",message:c.a.createElement(c.a.Fragment,null,"User left: ",c.a.createElement("strong",null,e.del_user))};return s.playNotification(),s.setState(function(e){return r.tableData=[a].concat(fe(e.tableData)),r})}if("message"===e.type){var o={timestamp:s.displayTimestamp(e.timestamp),username:e.username,message:e.message};return e.username!==s.state.username&&s.playNotification(),s.setState(function(e){return{tableData:[o].concat(fe(e.tableData))}})}var i;if("error"===e.type)return"username-in-use"===e.message?i="Username already in use.":"invalid-data"===e.message&&(i="Invalid data."),s.setState({errorText:i})},s.toggleAudio=function(){return s.setState(function(e){return{playAudio:!e.playAudio}})},s.playNotification=function(){s.state.playAudio&&s.notificationSound.play(void 0,void 0)},s.selectText=function(e){e.target.select()},s.renderErrorText=function(){if(s.state.errorText)return s.inputRef.current.select(),c.a.createElement("p",{className:"help is-danger"},s.state.errorText)},s.submitUsername=function(e){e.preventDefault(),s.publish({type:"subscribe",username:s.state.username})},s.submitMessage=function(e){e.preventDefault(),s.publish({type:"message",message:s.state.message}),s.setState({message:""})},s.testMessage=function(){s.publish({type:"message",message:"Hello, this is a test message! (".concat(Math.floor(1e3*Math.random()+1),")")})},s.displayTimestamp=function(e){return Object(X.a)(new Date(e),"d MMM h:mma")},s.state={subscribed:!1,username:K()({adjectives:1}),allUsers:[],playAudio:!0,tableData:[],errorText:"",message:""},s.notificationSound=new Y.Howl({src:["static/notification.mp3"]}),s.inputRef=c.a.createRef(),s.publish=s.props.subscribe("echo",s.handleWSMessage),s}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){var e,r=this;return e=this.state.subscribed?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"columns is-multiline"},c.a.createElement("div",{className:"column"},c.a.createElement("form",{className:"field is-grouped",onSubmit:this.submitMessage},c.a.createElement("p",{className:"control is-expanded"},c.a.createElement("input",{name:"message",className:"input",type:"text",placeholder:"Send message",value:this.state.message,onChange:this.handleInputChange,ref:this.inputRef}),this.renderErrorText()),c.a.createElement("div",{className:"control"},c.a.createElement("button",{className:"button is-primary"},"Send")))),c.a.createElement("div",{className:"column is-narrow"},c.a.createElement("button",{className:"button is-info",onClick:this.testMessage},"Send test message")),c.a.createElement("div",{className:"column is-full"},c.a.createElement("h3",null,"Current users:"," ",this.state.allUsers.map(function(e,t){var n=e===r.state.username?c.a.createElement("strong",null,e):e;return t<r.state.allUsers.length-1?c.a.createElement("span",{key:e},n,", "):c.a.createElement("span",{key:e},n)}))))):c.a.createElement("form",{className:"field is-grouped",onSubmit:this.submitUsername},c.a.createElement("div",{className:"control is-expanded"},c.a.createElement("input",{name:"username",className:"input",type:"text",value:this.state.username,onChange:this.handleInputChange,onFocus:this.selectText,ref:this.inputRef}),this.renderErrorText()),c.a.createElement("div",{className:"control"},c.a.createElement("button",{className:"button is-primary"},"Select username"))),c.a.createElement("div",{className:"ws-echo grid-child",ref:this.props.innerRef},c.a.createElement("div",{className:"grid-title flex-row align-items-center"},c.a.createElement("span",{className:"has-padding-right-10"},"Collaborator Chat"),c.a.createElement("span",{className:"icon has-text-primary is-size-6 has-cursor-pointer",onClick:this.toggleAudio},c.a.createElement("i",{className:"fas fa-fw "+(this.state.playAudio?"fa-volume-up":"fa-volume-mute")}))),e,c.a.createElement(ce,{data:this.state.tableData,tableClass:"is-narrow",containerStyle:{maxHeight:"40vh",overflowY:"auto"}}))}},{key:"componentDidUpdate",value:function(){this.props.onUpdate&&this.props.onUpdate()}}])&&me(n.prototype,r),a&&me(n,a),t}();be.propTypes={subscribe:p.a.func.isRequired,onUpdate:p.a.func,innerRef:p.a.func};var ge=c.a.forwardRef(function(e,t){return c.a.createElement(be,le({},e,{innerRef:t}))});ge.displayName="WSEchoWithRef";var ve=ge;function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e){function i(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return xe(n,(t=n=xe(this,(e=Ee(i)).call.apply(e,[this].concat(a))),n.state={data:[],loaded:!1,placeholder:"Loading..."},t))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(i,s["Component"]),t=i,(n=[{key:"componentDidMount",value:function(){var t=this;fetch(this.props.endpoint).then(function(e){return 200!==e.status?t.setState({placeholder:"Something went wrong"}):e.json()}).then(function(e){return t.setState({data:e,loaded:!0})})}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.loaded,r=e.placeholder;return n?this.props.render(t):c.a.createElement("p",null,r)}}])&&Se(t.prototype,n),r&&Se(t,r),i}();je.propTypes={endpoint:p.a.string.isRequired,render:p.a.func.isRequired};var _e=je;function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Re=function(e){function t(e){var m;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(m=Te(this,Ce(t).call(this,e))).handleGridUpdate=function(e,t){e!==m.width&&m.autosizeGridItems(),m.width=e,m.currentBreakpoint=t},m.onLayoutChange=function(e,t){l()(t,m.state.layouts)||(console.log("Setting state: onLayoutChange"),M("layouts",t),m.setState({layouts:t},function(){m.autosizeGridItems()}))},m.onGridItemResize=function(e,t,n,r){var a=n.i,o=m.items[a];o.style.height=0;var i=o.scrollHeight;o.style.height="100%";var s=m.calculateGridHeight(i+L.gridVerticalPadding);n.minH=s,n.h=Math.max(n.minH,n.h),m.autosize[a]&&(n.maxH=s,n.h=s,r.h=s)},m.handleChildUpdate=function(e){console.log("Child updated:",e),m.autosizeGridItems([e])},m.autosizeGridItems=function(p){window.requestAnimationFrame(function(){var t=d()(m.state.layouts[m.currentBreakpoint]);p=p||t.map(function(e){return e.i});var e=!1,n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value,c=s.i;if(!(p.indexOf(c)<0)){var l=m.items[c];l.style.height=0;var u=l.scrollHeight;l.style.height="100%";var f=m.calculateGridHeight(u+L.gridVerticalPadding);s.minH!==f&&(s.minH=f,e=!0),s.h<s.minH&&(s.h=s.minH,e=!0),m.autosize[c]&&(s.maxH===f&&s.h===f||(e=!0),s.maxH=f,s.h=f)}}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}e&&(console.log("Setting state: autosizeGridItems"),m.setState(function(e){return{layouts:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Pe(t,e,n[e])})}return t}({},e.layouts,Pe({},m.currentBreakpoint,t))}}))})},m.resetLayout=function(){console.log("Setting state: Reset"),m.setState({layouts:L.gridDefaultLayout})},m.calculateGridHeight=function(e){return Math.ceil((e+m.margin[1])/(m.rowHeight+m.margin[1]))},m.state={layouts:U("layouts")||L.gridDefaultLayout},m.margin=[10,10],m.containerPadding=[15,15],m.rowHeight=30,m.currentBreakpoint="",m.width=0,m.items={},m.autosize=U("autosize")||L.gridDefaultAutosize,m}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){var t=this;return c.a.createElement(T,{draggableHandle:".grid-title",layouts:d()(this.state.layouts),margin:this.margin,containerPadding:this.containerPadding,rowHeight:this.rowHeight,onLayoutChange:this.onLayoutChange,onResize:this.onGridItemResize,onUpdate:this.handleGridUpdate},c.a.createElement("div",{className:"box grid-box",key:"generateDerivation"},c.a.createElement(Q,{subscribe:this.props.subscribe,onUpdate:function(){return t.handleChildUpdate("generateDerivation")},ref:function(e){t.items.generateDerivation=e}})),c.a.createElement("div",{className:"box grid-box",key:"wsEcho"},c.a.createElement(ve,{subscribe:this.props.subscribe,onUpdate:function(){return t.handleChildUpdate("wsEcho")},ref:function(e){t.items.wsEcho=e}})),c.a.createElement("div",{className:"box grid-box",key:"lexicalItems"},c.a.createElement("div",{className:"lexical-items grid-child",ref:function(e){t.items.lexicalItems=e}},c.a.createElement("p",{className:"grid-title"},"Lexical Items"),c.a.createElement(_e,{endpoint:"api/lexicon/?fields=text,language,features",render:function(e){return c.a.createElement(ce,{data:e,containerStyle:{overflow:"auto"}})}}))))}},{key:"componentDidUpdate",value:function(){console.log("Check: Shouldn't be needing to call this here once all components are factored out of the main App component."),this.autosizeGridItems()}}])&&Ne(n.prototype,r),a&&Ne(n,a),t}();Re.propTypes={subscribe:p.a.func.isRequired};var Ie,De=x(Re,"".concat(L.wsURL)),Le=n(12),Ue=n.n(Le),Me=n(287),He=n.n(Me),Ge=Ue()("body"),We=Ue()("#cs-navbar"),ze=Ue()("#cs-brand-container"),qe=Ue()("#cs-logo"),Be=Ue()("#cs-title"),Fe=Ue()("#cs-subtitle"),Je="10rem",Ve="3.25rem",Qe=!0;function Ye(){We.addClass("is-fixed-top"),Ge.css({"padding-top":"calc(".concat(Ue()(window).scrollTop(),"px + ").concat(Je,")")}),window.setTimeout(function(){Ge.addClass("cs-animate"),qe.css({height:"1.75rem",width:"1.75rem","max-height":"","margin-right":"0.5rem"}),ze.removeClass("container is-fluid has-padding-0"),Be.text("CS Toolkit"),Fe.detach(),We.removeClass("hero-body"),We.css({height:Ve}),Ge.css({"padding-top":Ve}),ze.off("click.collapse"),ze.one("click.expand",function(){qe.css({height:"65px",width:"65px","max-height":"100%","margin-right":"1rem"}),ze.addClass("container is-fluid has-padding-0"),Be.text("The Code Switching Toolkit"),Fe.insertAfter(Be),We.removeClass("is-fixed-top"),Ge.removeClass("cs-animate"),Ue()("body").css("padding-top",""),We.addClass("hero-body"),We.css({height:Je}),ze.off("click.expand"),ze.one("click.collapse",function(){Ye(),Qe=!1}),Qe=!0})},0)}window.addEventListener("scroll",He()(function(){0<Ue()(window).scrollTop()&&Qe&&(Ye(),Qe=!1)},50)),ze.one("click.collapse",function(){Ye(),Qe=!1}),Ue()(".navbar-burger").click(function(){Qe&&Ye(),Ue()(".navbar-burger").toggleClass("is-active"),Ue()(".navbar-menu").toggleClass("is-active")}),r.a.autoReplaceSvg="nest",r.b.watch(),o.a.render(c.a.createElement(De,{ref:function(e){return Ie=e}}),document.getElementById("root")),Ue()("#cs-reset").on("click",function(){Ie.inner.resetLayout()}),window.$=Ue.a}});